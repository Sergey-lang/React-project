{"version":3,"sources":["u2-components/common/FormsControls/FormControls.jsx","u2-components/common/FormsControls/FormControls.module.css","utils/validators/validators.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","u3-pages/Profile/ProfInfo/ProfileInfo.module.css","u1-assets/images/avatar.png","u3-pages/Profile/MyPosts/MyPosts.module.css","u3-pages/Profile/Post/Post.module.css","u3-pages/Profile/ProfInfo/ProfileStatusWithHooks.jsx","u3-pages/Profile/ProfInfo/ProfileInfo.jsx","u3-pages/Profile/Post/Post.jsx","u3-pages/Profile/MyPosts/MyPosts.jsx","u3-pages/Profile/MyPosts/MyPostsContainer.js","u3-pages/Profile/Profile.jsx","u3-pages/Profile/ProfileContainer.jsx"],"names":["FormControl","input","meta","touched","error","children","hasError","className","s","formControl","Textarea","props","restProps","Input","CreateField","placeholder","name","component","validators","text","validate","module","exports","required","value","maxLengthCreator","maxLength","length","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","unsupportedIterableToArray","TypeError","ProfileStatusWithHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","autoFocus","onBlur","updateOwnProfileStatus","onChange","e","currentTarget","ProfileInfo","profile","isOwner","savePhoto","Preloader","descriptionBlock","avatarImg","alt","src","photos","large","avatar","type","target","files","aboutMe","contacts","instagram","lookingForAJob","userId","lookingForAJobDescription","Post","item","message","likesCount","MyPosts","React","memo","postsElements","posts","map","p","key","id","postsBlock","AddNewPostForm","onSubmit","addPost","newPostText","maxLength10","reduxForm","form","handleSubmit","Field","MyPostsContainer","connect","state","profilePage","dispatch","postMessageText","addPostActionCreator","Profile","ProfileContainer","this","match","params","authorizedUserId","history","getUserProfileData","getStatusFromUser","refreshProfile","prevProps","prevState","snapshot","Component","compose","auth","isAuth","withRouter"],"mappings":"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","file":"static/js/4.95cefa82.chunk.js","sourcesContent":["import React from 'react'\r\nimport s from './FormControls.module.css'\r\nimport {Field} from 'redux-form'\r\n\r\nconst FormControl = ({input, meta: {touched, error}, children}) => {\r\n   const hasError = touched && error\r\n   return (\r\n       <div className={s.formControl + ' ' + (hasError ? s.error : '')}>\r\n          <div>\r\n             {children}\r\n          </div>\r\n          {hasError && <span>{error}</span>}\r\n       </div>\r\n   )\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n   const {input, meta, ...restProps} = props\r\n   return <FormControl {...props}><textarea {...input}{...restProps}/></FormControl>\r\n}\r\n\r\nexport const Input = (props) => {\r\n   const {input, meta, ...restProps} = props\r\n   return <FormControl {...props}><input {...input}{...restProps}/></FormControl>\r\n}\r\n\r\nexport const CreateField = (placeholder, name, component, validators, props = {}, text = '') => (\r\n    <div>\r\n       <Field placeholder={placeholder} name={name} component={component} validate={validators} {...props}/>\r\n       {text}\r\n    </div>\r\n)\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControls_formControl__D0p8B\",\"error\":\"FormControls_error__2QGSA\"};","export const required = value => {\r\n   if(value) return undefined;\r\n\r\n   return 'Field id required';\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) =>{\r\n   if(value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n\r\n   return undefined;\r\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__38D81\",\"avatarImg\":\"ProfileInfo_avatarImg__wlEaK\"};","module.exports = __webpack_public_path__ + \"static/media/avatar.e67e358c.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__JQHs0\",\"posts\":\"MyPosts_posts__GhBBY\",\"add_post\":\"MyPosts_add_post__o0MEK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__3cCX2\"};","import React, {useEffect, useState} from 'react';\r\n\r\nexport const ProfileStatusWithHooks = (props) => {\r\n\r\n    let [editMode, setEditMode] = useState(false)\r\n    let [status, setStatus] = useState(props.status)\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false)\r\n        props.updateOwnProfileStatus(status)\r\n    }\r\n\r\n    const onStatusChange = (e) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!editMode &&\r\n            <div>\r\n               <span onDoubleClick={activateEditMode}>\r\n                  {props.status || '-----'}\r\n               </span>\r\n            </div>}\r\n            {editMode &&\r\n            <div>\r\n                <input autoFocus={true}\r\n                       onBlur={deactivateEditMode}\r\n                       onChange={onStatusChange}\r\n                       value={status}\r\n                />\r\n            </div>}\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport s from './ProfileInfo.module.css'\r\nimport {Preloader} from '../../../u2-components/common/preloader/Preloader'\r\nimport avatar from '../../../u1-assets/images/avatar.png'\r\nimport {ProfileStatusWithHooks} from './ProfileStatusWithHooks'\r\n\r\nexport const ProfileInfo = ({profile, status, updateOwnProfileStatus,isOwner, savePhoto}) => {\r\n\r\n   if (!profile) {\r\n      return <Preloader/>\r\n   }\r\n   const mainPhotoSelect = (e) => {\r\n      if(e.target.files.length) {\r\n         savePhoto(e.target.files[0])\r\n      }\r\n   }\r\n\r\n   return (\r\n       <div>\r\n          <div className={s.descriptionBlock}>\r\n             <div className={s.avatarImg}>\r\n                <img alt='avatar' src={profile.photos.large || avatar}/>\r\n             </div>\r\n             {\r\n                isOwner && <input type={'file'} onChange={mainPhotoSelect}/>\r\n             }\r\n             <div>\r\n                <ProfileStatusWithHooks status={status}\r\n                                        updateOwnProfileStatus={updateOwnProfileStatus}/>\r\n             </div>\r\n             <p>{profile.aboutMe}</p>\r\n             <p>{profile.contacts.instagram}</p>\r\n             <p>{profile.lookingForAJob}</p>\r\n             <p>{profile.userId}</p>\r\n             <p>{profile.lookingForAJobDescription}</p>\r\n          </div>\r\n       </div>\r\n   )\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport s from './Post.module.css'\r\n\r\nexport const Post = (props) => {\r\n   return <div className={s.item}>\r\n      <img alt={'post'} src=\"https://img.icons8.com/bubbles/100/000000/flag-person-male.png\"/>\r\n      <div>\r\n         {props.message}\r\n         <span> Like</span> {props.likesCount}\r\n      </div>\r\n   </div>\r\n\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport s from './MyPosts.module.css'\r\nimport {Post} from '../Post/Post'\r\nimport {Field, reduxForm} from 'redux-form'\r\nimport {maxLengthCreator, required} from '../../../utils/validators/validators'\r\nimport {Textarea} from '../../../u2-components/common/FormsControls/FormControls'\r\n\r\nexport const MyPosts = React.memo((props) => {\r\n   let postsElements =\r\n       props.posts.map((p, i) => <Post key={`${p.id}_${i}`} message={p.message} likesCount={p.likesCount}/>)\r\n\r\n   let addNewPost = (value) => {\r\n      props.addPost(value.newPostText)\r\n   }\r\n\r\n   return (\r\n       <div className={s.postsBlock}>\r\n          <h3>My posts</h3>\r\n          <AddNewPostForm onSubmit={addNewPost}/>\r\n          <div className={s.posts}>\r\n             {postsElements}\r\n          </div>\r\n       </div>\r\n   )\r\n})\r\n\r\nconst maxLength10 = maxLengthCreator(10)\r\n\r\nexport const AddPost = (props) => {\r\n\r\n   return (\r\n       <form onSubmit={props.handleSubmit}>\r\n          <div>\r\n             <Field placeholder='Add post'\r\n                    component={Textarea}\r\n                    name='newPostText'\r\n                    validate={[required, maxLength10]}\r\n             />\r\n          </div>\r\n          <div>\r\n             <button>Add post</button>\r\n          </div>\r\n       </form>\r\n   )\r\n}\r\n\r\nconst AddNewPostForm = reduxForm({form: 'dialogAddMessageForm'})(AddPost)\r\n","import {addPostActionCreator} from '../../../u4-redux/profile-reducer'\r\nimport {MyPosts} from './MyPosts'\r\nimport {connect} from 'react-redux'\r\n\r\nconst mapStateToProps = (state) => {\r\n   return {\r\n      posts: state.profilePage.posts,\r\n   }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n   return {\r\n      addPost: (postMessageText) => {\r\n         dispatch(addPostActionCreator(postMessageText))\r\n      }\r\n   }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)\r\nexport default MyPostsContainer\r\n","import React from 'react'\r\nimport {ProfileInfo} from './ProfInfo/ProfileInfo'\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer'\r\n\r\nexport const Profile = (props) => {\r\n   return (\r\n       <div>\r\n          <ProfileInfo profile={props.profile}\r\n                       status={props.status}\r\n                       updateOwnProfileStatus={props.updateOwnProfileStatus}\r\n                       savePhoto={props.savePhoto}\r\n                       isOwner={props.isOwner}\r\n          />\r\n          <MyPostsContainer/>\r\n       </div>\r\n   )\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {compose} from 'redux'\r\nimport {Profile} from './Profile'\r\nimport {getStatusFromUser, getUserProfileData, savePhoto, updateOwnProfileStatus} from '../../u4-redux/profile-reducer'\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n   refreshProfile() {\r\n      let userId = this.props.match.params.userId\r\n      if (!userId) {\r\n         userId = this.props.authorizedUserId\r\n         if (!userId) {\r\n            this.props.history.push('/login')\r\n         }\r\n      }\r\n      this.props.getUserProfileData(userId)\r\n      this.props.getStatusFromUser(userId)\r\n   }\r\n\r\n   componentDidMount() {\r\n      this.refreshProfile()\r\n   }\r\n\r\n   componentDidUpdate(prevProps, prevState, snapshot) {\r\n      if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n         this.refreshProfile()\r\n      }\r\n   }\r\n\r\n   render() {\r\n      return <Profile {...this.props}\r\n                      isOwner={!this.props.match.params.userId}\r\n                      profile={this.props.profile}\r\n                      status={this.props.status}\r\n                      savePhoto={this.props.savePhoto}\r\n                      updateOwnProfileStatus={this.props.updateOwnProfileStatus}/>\r\n   }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n   profile: state.profilePage.profile,\r\n   status: state.profilePage.status,\r\n   authorizedUserId: state.auth.id,\r\n   isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {getUserProfileData, getStatusFromUser, updateOwnProfileStatus,savePhoto}),\r\n    withRouter,\r\n)(ProfileContainer)\r\n\r\n\r\n"],"sourceRoot":""}